<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authentic Algerian Shakshouka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfbf7;
            color: #2d2a26;
        }
        h1, h2 {
            font-family: 'Playfair Display', serif;
        }
        .recipe-card {
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border-radius: 24px;
        }
        .ingredient-transition {
            transition: all 0.3s ease;
        }
        .hero-gradient {
            background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.7) 100%);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Hero Section -->
    <header class="relative h-[60vh] flex items-center justify-center overflow-hidden">
        <img id="hero-image" src="" alt="Algerian Shakshouka" class="absolute inset-0 w-full h-full object-cover">
        <div class="absolute inset-0 hero-gradient"></div>
        <div class="relative z-10 text-center px-4">
            <span class="text-orange-400 font-semibold tracking-widest uppercase text-sm mb-2 block">Traditional Algerian Cuisine</span>
            <h1 class="text-5xl md:text-7xl text-white mb-4">Shakshouka</h1>
            <p class="text-white/80 text-lg max-w-xl mx-auto italic">Simple, vibrant, and soul-warming. The ultimate North African comfort food.</p>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-6 -mt-20 relative z-20 pb-20">
        <div class="recipe-card p-8 md:p-12">
            
            <!-- Quick Info -->
            <div class="flex flex-wrap gap-6 mb-12 pb-8 border-b border-stone-100 justify-center md:justify-start">
                <div class="flex flex-col">
                    <span class="text-stone-400 text-xs uppercase tracking-wider">Prep Time</span>
                    <span class="font-semibold">10 mins</span>
                </div>
                <div class="w-px h-10 bg-stone-200 hidden md:block"></div>
                <div class="flex flex-col">
                    <span class="text-stone-400 text-xs uppercase tracking-wider">Cook Time</span>
                    <span class="font-semibold">20 mins</span>
                </div>
                <div class="w-px h-10 bg-stone-200 hidden md:block"></div>
                <div class="flex flex-col">
                    <span class="text-stone-400 text-xs uppercase tracking-wider">Difficulty</span>
                    <span class="font-semibold text-green-600">Very Easy</span>
                </div>
            </div>

            <!-- Interactive Element: Servings Calculator -->
            <section class="mb-12">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-3xl">Ingredients</h2>
                    <div class="flex items-center bg-stone-100 rounded-full px-4 py-2">
                        <span class="text-sm mr-4 font-medium text-stone-500 uppercase">Servings</span>
                        <button onclick="updateServings(-1)" class="w-8 h-8 flex items-center justify-center bg-white rounded-full shadow-sm hover:bg-orange-50 transition-colors">-</button>
                        <span id="serving-count" class="mx-4 font-bold text-lg">2</span>
                        <button onclick="updateServings(1)" class="w-8 h-8 flex items-center justify-center bg-white rounded-full shadow-sm hover:bg-orange-50 transition-colors">+</button>
                    </div>
                </div>

                <ul id="ingredient-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Ingredients populated by JS -->
                </ul>
            </section>

            <!-- Instructions -->
            <section>
                <h2 class="text-3xl mb-8">Preparation</h2>
                <div class="space-y-8">
                    <div class="flex gap-6">
                        <span class="flex-shrink-0 w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center font-bold">1</span>
                        <div>
                            <h3 class="font-semibold text-lg mb-1">The Base</h3>
                            <p class="text-stone-600 leading-relaxed">Heat olive oil in a large skillet. Add diced onions and peppers. Saut√© until softened and slightly golden (about 5-7 minutes).</p>
                        </div>
                    </div>
                    <div class="flex gap-6">
                        <span class="flex-shrink-0 w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center font-bold">2</span>
                        <div>
                            <h3 class="font-semibold text-lg mb-1">Simmer the Sauce</h3>
                            <p class="text-stone-600 leading-relaxed">Add garlic, cumin, and paprika. Stir for a minute until fragrant, then add the diced tomatoes. Simmer until the sauce thickens slightly.</p>
                        </div>
                    </div>
                    <div class="flex gap-6">
                        <span class="flex-shrink-0 w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center font-bold">3</span>
                        <div>
                            <h3 class="font-semibold text-lg mb-1">The Eggs</h3>
                            <p class="text-stone-600 leading-relaxed">Make small wells in the sauce with a spoon. Crack an egg into each well. Cover the pan and cook for 5-8 minutes until the whites are set but yolks are still runny.</p>
                        </div>
                    </div>
                    <div class="flex gap-6">
                        <span class="flex-shrink-0 w-10 h-10 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center font-bold">4</span>
                        <div>
                            <h3 class="font-semibold text-lg mb-1">Garnish & Serve</h3>
                            <p class="text-stone-600 leading-relaxed">Top with fresh parsley and a pinch of black pepper. Serve immediately with warm, crusty Algerian bread (Khobz).</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="text-center py-12 text-stone-400 text-sm">
        <p>Discover more Mediterranean flavors &copy; 2024</p>
    </footer>

    <script>
        const apiKey = ""; // Provided by environment

        // Base recipe for 2 servings
        const baseIngredients = [
            { name: "Olive Oil", amount: 2, unit: "tbsp" },
            { name: "Large Onion", amount: 0.5, unit: "" },
            { name: "Bell Peppers", amount: 1, unit: "" },
            { name: "Garlic Cloves", amount: 2, unit: "" },
            { name: "Ripe Tomatoes", amount: 4, unit: "" },
            { name: "Eggs", amount: 2, unit: "" },
            { name: "Ground Cumin", amount: 1, unit: "tsp" },
            { name: "Paprika", amount: 1, unit: "tsp" },
            { name: "Fresh Parsley", amount: 1, unit: "bunch" }
        ];

        let currentServings = 2;

        async function generateImage() {
            const prompt = "A high-quality, professional food photography of an Algerian Shakshouka in a rustic cast iron skillet. Bright red tomato sauce, poached eggs with runny yolks, green peppers, and fresh parsley garnish. Soft natural lighting on a wooden table with crusty bread on the side.";
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/imagen-4.0-generate-001:predict?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        instances: [{ prompt: prompt }],
                        parameters: { sampleCount: 1 }
                    })
                });
                const result = await response.json();
                if (result.predictions && result.predictions[0].bytesBase64Encoded) {
                    document.getElementById('hero-image').src = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                }
            } catch (error) {
                // Fallback to a high-quality placeholder if API fails
                document.getElementById('hero-image').src = "https://images.unsplash.com/photo-1590412200988-a436bb7050a8?q=80&w=1200&auto=format&fit=crop";
            }
        }

        function updateServings(delta) {
            const newVal = currentServings + delta;
            if (newVal >= 1 && newVal <= 12) {
                currentServings = newVal;
                renderIngredients();
            }
        }

        function renderIngredients() {
            const list = document.getElementById('ingredient-list');
            const countDisplay = document.getElementById('serving-count');
            
            countDisplay.innerText = currentServings;
            list.innerHTML = '';

            baseIngredients.forEach(item => {
                const calculatedAmount = (item.amount / 2) * currentServings;
                // Format numbers to avoid ugly decimals
                const displayAmount = calculatedAmount % 1 === 0 ? calculatedAmount : calculatedAmount.toFixed(1);
                
                const li = document.createElement('li');
                li.className = 'flex items-center p-3 bg-stone-50 rounded-xl ingredient-transition border border-stone-100';
                li.innerHTML = `
                    <span class="w-12 font-bold text-orange-600">${displayAmount}</span>
                    <span class="text-stone-500 text-sm mr-2">${item.unit}</span>
                    <span class="text-stone-800 font-medium">${item.name}</span>
                `;
                list.appendChild(li);
            });
        }

        window.onload = () => {
            renderIngredients();
            generateImage();
        };
    </script>
</body>
</html>
